import Geolocation from 'react-native-geolocation-service';

import {request, check, PERMISSIONS} from 'react-native-permissions';

const [currentPosition, setCurrentPosition] =
    useState<BaseCoordinates | null>(null);

  useEffect(() => {
    check(PERMISSIONS.ANDROID.ACCESS_COARSE_LOCATION).then(result => {
      if (result !== 'granted') {
        request(PERMISSIONS.ANDROID.ACCESS_COARSE_LOCATION).then(status => {
          if (status !== 'granted') return;
          Geolocation.getCurrentPosition(
            position => {
              setCurrentPosition({
                latitude: position.coords.latitude,
                longitude: position.coords.longitude,
              });
            },
            err => {
              console.error(err);
            },
          );
        });
      } else if (result === 'granted') {
        Geolocation.getCurrentPosition(
          position => {
            setCurrentPosition({
              latitude: position.coords.latitude,
              longitude: position.coords.longitude,
            });
          },
          err => {
            console.error(err);
          },
        );
      }
    });
  }, []);